####################################################
### Build MySql 5.6 on Debian
####################################################
# Install Build Tools
sudo apt-get install gcc g++ autoconf autogen automake autotools-dev m4 pkg-config intltool libtool make cmake

# Install Build Dependencies
sudo apt-get install cmake bison chrpath gawk lsb-release perl pkg-config po-debconf psmisc
sudo apt-get install libssl-dev libaio-dev libedit-dev libncurses5-dev zlib1g-dev libjemalloc-dev

# OPT: -DWITH_LIBWRAP=ON
# sudo apt-get install libwrap0-dev

# Download
wget https://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.51.tar.gz
tar zxvf mysql-5.6.51.tar.gz

# Build
cd mysql-5.6.51

rm -rf build
mkdir build
cd build

cmake .. \
-DCMAKE_INSTALL_PREFIX=/usr \
-DMYSQL_DATADIR=/var/lib/mysql \
-DSYSCONFDIR=/etc/mysql \
-DINSTALL_INFODIR=share/mysql/docs \
-DINSTALL_MANDIR=share/man \
-DINSTALL_LIBDIR=lib/x86_64-linux-gnu \
-DINSTALL_PLUGINDIR=lib/mysql/plugin \
-DINSTALL_SCRIPTDIR=bin \
-DINSTALL_INCLUDEDIR=include/mysql \
-DINSTALL_DOCREADMEDIR=share/mysql \
-DINSTALL_SUPPORTFILESDIR=share/mysql \
-DINSTALL_MYSQLSHAREDIR=share/mysql \
-DINSTALL_DOCDIR=share/mysql/docs \
-DINSTALL_SHAREDIR=share/mysql \
-DMYSQL_UNIX_ADDR=/var/run/mysqld/mysqld.sock \
-DENABLED_LOCAL_INFILE=ON \
-DDEFAULT_CHARSET=utf8 \
-DDEFAULT_COLLATION=utf8_general_ci \
-DWITH_EXTRA_CHARSETS=all \
-DCMAKE_BUILD_TYPE=Release \
-DWITH_EMBEDDED_SERVER=ON \
-DWITH_INNOBASE_STORAGE_ENGINE=ON \
-DWITH_PARTITION_STORAGE_ENGINE=ON \
-DWITH_ARCHIVE_STORAGE_ENGINE=ON \
-DWITH_BLACKHOLE_STORAGE_ENGINE=ON \
-DWITHOUT_EXAMPLE_STORAGE_ENGINE=ON \
-DWITHOUT_FEDERATED_STORAGE_ENGINE=ON \
-DBUILD_CONFIG=mysql_release \
-DCMAKE_EXE_LINKER_FLAGS='-ljemalloc' \
-DWITH_LIBWRAP=OFF \
-DWITH_ZLIB=system \
-DWITH_EDITLINE=system \
-DWITH_SSL=system \
${OPT}

make -j$(nproc)

sudo make install

